\section{Основы}
\subsection{Что и как?}
\begin{em}
PHP — это маленькое зло, созданное некомпетентными новичками, в то
время как Perl — это большое и коварное зло, созданное умелыми, но 
извращёнными профессионалами.
\begin{flushright}
Jon Ribbens
\end{flushright}
\end{em}

Сначала немножко теории. В вики написано:

\begin{em}
„Perl — высокоуровневый интерпретируемый динамический язык
программирования общего назначения, созданный Ларри Уоллом, лингвистом
по образованию.”
\end{em}

Ларри подошел к созданию языка программирования как лингвист,
поэтому Perl получился таким необычным.
В своей книге „Программирование на Perl” он постоянно приводит аналогии
между Perl’ом и естественным языком.
Возможно поэтому Perl так лихо обрабатывает любую текстовую информацию.
Что ещё мы узнали? Perl язык интерпретируемый, это означает, что текст
программы\footnote{Программы на Perl часто называют
сценариями или ещё чаще скриптами}
содержится в простом текстовом файле и переводиться на язык,
понятный ЭВМ специальной программой (интерпретатором).
Интерпретатор постепенно читает программу на Perl
(которую принято называть СКРИПТОМ) и заставляет твою компьютер
выполнять её. Теперь задумаемся над тем, что же такое программа?
Думаю можно сказать, что это алгоритм, записанный на каком-либо языке
программирования. А алгоритм это последовательность действий, приводящая
к определенному результату. Обобщим. Чтоб заставить компьютер делать вещи,
нужно составить алгоритм. Человек должен четко представлять,
как достичь результата. Далее, алгоритм нужно перевести на один из
понятных для машины языков и чем богаче язык — тем легче нам будет это
сделать. Поэтому мы будем писать на Perl, очень богатом и гибком языке.

Хватит лирики, что нам нужно, чтобы приступить?
\begin{enumerate}
\item Интерпретатор Perl
\item Хороший текстовый редактор
\end{enumerate}

У пользователей Linux скорей всего есть и то и другое.

%\begin{minipage}[t][\height][t]{\textwidth}
\vbox{

\textbf{Windows:}
\begin{itemize}
\item Качаем интерпретатор здесь:

http://strawberryperl.com/
\item На роль текстового редактора вполне подойдет Notepad++:

http://notepad-plus-plus.org/download/
\end{itemize}
%\end{minipage}
}
Специально для пользователей windows есть один финт. Чтоб не скакать
по каталогам и сразу запустить командную строку там где нужно:
\begin{enumerate}
\item Создаем где-нибудь папку, в которой будут храниться все наши скрипты.
\item В этой папке создаём файл с расширением „bat”. В файл добавляем
единственную строку:

\texttt{cmd.exe}
\end{enumerate}
Теперь для запуска командной строки достаточно дважды кликнуть по батнику.

Но это не все подводные камни, подстерегающие пользователя windows
на пути к Perl. Дело в том, что в консоли Windows используется кодировка
\emph{cp866} , а блокнот, например сохраняет текст в \emph{cp1251}. Поэтому русский
текст, содержащийся в скрипте, который писался в блокноте, будет выведен
на экран в не читаемом виде. Но это легко исправить, собственно для того
мы и скачали Notepad++. Перед тем, как набирать / вставлять из буфера
листинг устанавливаем нужную кодировку:

\texttt{Кодировка>Кириллическая>ОЕМ 866}

Кстати, копировать листинги из книги — плохая идея. Настоятельно
рекомендую перебивать их вручную. Во-первых, так лучше запоминается.
Во-вторых, текст не всегда копируется правильно. На данный момент
известен как минимум один глюк, с которым я ничего не могу поделать. Он
описан в третьем пункте FAQ.

Мальчик мой, ты готов стать мужчиной!

\subsection{Первая программа}

Когда программист перестает быть мальчиком? Само собой, написав первую
программу! А вот и она:

\perl{l01.pl}

Давайте разбираться, что же мы написали и как это запустить? Здесь надо
подумать. Понимаю не хочется. Тем более что в первый раз это больно. Все
листинги\footnote{Листинг --- текст скрипта. Его исходный код}
будут оформляться похожим образом. Строки пронумерованы,
чтоб на них можно было легко ссылаться. Не нужно копировать номера!
Первая строка будет присутствовать во всех исходных текстах. Пользователям
Windows она не нужна, но в случае чего интерпретатор просто проигнорирует
эту инструкцию и ничего страшного не случится. В любом случае, данная строка удобный ориентир.
Не копируй из книги ничего, что стоит левее „\emph{\#!}”. Ладно,
запускаем первый скрипт.

\textbf{На Linux:}

Есть как минимум два пути:

\begin{enumerate}
\item Копируем 2ю строчку в файл foo\footnote{foo,
bar и baz --- имена метапеременных. Это слова-заменители, которые применяются
в технических текстах для обозначения чего-либо,
что может стоять на их месте.}.pl.

Теперь достаточно набрать в
консоли:

\texttt{perl foo.pl}

Скрипт будет выполнен. Если foo.pl лежит вне текущего каталога,
необходимо указать полный путь к файлу:

\texttt{perl /home/YOBA/perl/foo.pl}

\item Другой способ состоит в том, чтоб сделать скрипт „\emph{исполняемым}”.
Для этого необходимо скопировать в файл foo.pl обе строчки. В первой
строке содержится специальная управляющая последовательность —
„\emph{\#!}”. Если загрузчик программ встречает файл с такой последовательностью
в первой строке, он знает, что остаток строки содержит путь до интерпретатора,
а все последующие строки --- исходный код, который нужно „скормить” файлу из
первой строки.
Ключ „\emph{-w}” просит интерпретатор
выводить более подробные предупреждения и сообщения. Советую всегда
использовать его. Кстати, совершенно не обязательно, что в твоей
системе интерпретатор живет в каталоге /usr/bin. Чтобы точно узнать,
что же нужно писать в первой строке, достаточно ввести команду:

\texttt{which perl}

На самом деле существует и более кросcплатформенный вариант, который взлетит у тебя,
всех твоих одноклассников и даже у твоей ЕОТ!
„\emph{\#!/usr/bin/env perl -w}”
В данном случае, поиск интерпретатора perl мы делегируем утилите env. Мы только
начали, а уже TMTOWTDI\footnote{„There's More Than One Way To Do It!” ---
есть больше одного способа сделать это! Девиз языка Perl, который прямо противоположен
девизу python.}

Также необходимо дать файлу со скриптом права на исполнение:

\texttt{chmod +x foo.pl}

Готово! Теперь скрипт можно запустить, просто набрав его имя в терминале:

\texttt{./foo.pl}

Если кто-то не знает, \emph{„./”} на Unix-подобных системах синоним для
текущего каталога. Также есть синоним для родительского каталога
„\emph{\symbol{126}/}” . Дело в том, что Linux и Unix пользователи хранят свои лич-
ные файлы (а скрипты дело очень личное) где-то в своих домашних
каталогах. Например „\emph{/home/Yoba/perlperl/}” , так вот, чтоб не писать
„\emph{/home/Yoba/}” , достаточно написать „\emph{\symbol{126}/}” .

Если foo.pl находится в каталоге отличном от текущего --— необходимо также 
указать путь до него. 

\item Можно обойтись вообще без файлов, используя знаменитые перловые
однострочники. Для этого вызываем интерпретатор с ключом \emph{„-e”} 
\footnote{Данный
ключ говорит интерпретатору, что далее пойдет не имя файла со скриптом,
а код на Perl который нужно выполнить.}
и пишем наш однострочник, заключив его в одинарные кавычки:

\texttt{perl -e \textquotesingle print "YOBA ETO TI?\textbackslash n";}\textquotesingle
\end{enumerate}

\textbf{На Windows:}
Здесь всё просто. Создаём файл с расширением \remph{pl} , в папке со скриптами.
Там же должен лежать созданный ранее батник, запускаем его. В открывшейся консоли
набираем:

\texttt{perl foo.pl}

Под Windows тело однострочника должно быть заключено в двойные кавычки, поэтому 
наш скрипт будет выглядеть немного иначе. Заменяем кавычки в print на их синоним ---
конструкцию \remph{qq()}.
Всё, что находится в скобках, будет вести себя так же, как если бы его
заключили в двойные кавычки. В остальном для Windows справедливо
все, что сказано для однострочников под Linux. Итак:

\texttt{perl -e "print qq(YOBA ETO TI?\textbackslash n);"}

Готово! Я у мамы программист!

Теперь давай разбираться в нашем первом скрипте. Что мы видим?
Во-первых, оператор print. Оператор -- это кусочек кода, который
что-то делает. В данном случае он осуществляет вывод на экран.
Каждый оператор отделяется точкой с запятой. Забытая точка с запятой
приведет к синтаксической ошибке.

Далее идёт заключенный в кавычки текст. При этом кавычки могут быть
как двойные, так и одинарные. В чем разница? Важный момент! Существует
такое понятие, как \remph{интерполяция} , иначе подстановка. В одинарных
кавычках подстановка \textbf{не} осуществляется. Хотя есть два исключения, это 
\textbackslash\textquotesingle , для того, чтоб использовать одинарные кавычки в строке,
 ограниченной ими же, и
\textbackslash\textbackslash, чтоб можно было \remph{отключить} слэш в
конце строки (иначе он отключит одинарную кавычку). Количество вещей имеющих
сакральный смысл для двойных кавычек намного выше. Например есть ряд символов, 
начинающихся с бэкслэша:

\textbackslash t — табуляция

\textbackslash n — перевод строки

\textbackslash\textbackslash — бэкслэш

Тысячи их. В нашем примере мы используем перевод строки.
Советую запомнить этот спец. символ.

О комментариях. Всё что идёт после символа \emph{\#} считается комментарием.
Думаю, не нужно объяснять зачем комментировать скрипты? Остановимся на
менее очевидном применении комментариев. Можно целеком „закомментировать”
строчку, если не хочешь, чтоб она выполнялась по каким-либо причинам.

Ещё пара слов об однострочниках. Perl, как никакой другой язык
программирования, помогает людям в повседневной жизни, в том числе 
благодаря однострочникам. Однострочник -- это скрипт, записанный в одну
строку и переданный интерпретатору на исполнение непосредственно, без
создания файла не жестком диске. Ну действительно, зачем плодить лишние
сущности для скрипта-однодневки, вычисляющего значение конкретного
выражения? Кстати, именно благодаря однострочникам, Perl получил славу
непонятного и сложного языка. Скрипты, записанные одной строкой
действительно трудно читать. Понятность приносится в жертву удобству. Но %Не всегда трудно, можно запилить переводы строк.
однострочники обычно пишут раз и навсегда, не предполагая их изменения
в дальнейшем. Хотя конечно однострочник может содержать что угодно,
будь то фильтр текстовых строк, конвертер валют или интернет-магазин.
%\vskip

{\large{\textbf{Вопросы для самоконтроля:}}}

\begin{enumerate}
\item Что такое скрипт?
\item Для чего предназначен интерпретатор?
\item Чем программа отличается от алгоритма?
\item Из чего состоит полное имя файла?
\end{enumerate}

{\large{\textbf{Задания к разделу:}}}

\begin{enumerate}
\item Напиши однострочник, выводящий на экран следующий текст:
\begin{verbatim}
-$USERNAME, ДЕВУШКУ-ТО СЕБЕ НАШЕЛ?
-Нет.
-А ЧЕ ТАК? ТЫ ЧАСОМ НЕ ИЗ "ЭТИХ"?
\end{verbatim}
\item Что выведет на экран этот скрипт? Почему? Запусти его и проверь
себя. Если ошибся --— 20 отжиманий.
\end{enumerate}

\perl{l02.pl}
